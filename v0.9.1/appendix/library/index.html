<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Library · OceanBioME.jl</title><meta name="title" content="Library · OceanBioME.jl"/><meta property="og:title" content="Library · OceanBioME.jl"/><meta property="twitter:title" content="Library · OceanBioME.jl"/><meta name="description" content="Documentation for OceanBioME.jl."/><meta property="og:description" content="Documentation for OceanBioME.jl."/><meta property="twitter:description" content="Documentation for OceanBioME.jl."/><meta property="og:url" content="https://OceanBioME.github.io/OceanBioME/stable/appendix/library/"/><meta property="twitter:url" content="https://OceanBioME.github.io/OceanBioME/stable/appendix/library/"/><link rel="canonical" href="https://OceanBioME.github.io/OceanBioME/stable/appendix/library/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.png" alt="OceanBioME.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.png" alt="OceanBioME.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">OceanBioME.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../quick_start/">Quick start</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/box/">Box model</a></li><li><a class="tocitem" href="../../generated/column/">Simple column model</a></li><li><a class="tocitem" href="../../generated/eady/">Baroclinic instability</a></li><li><a class="tocitem" href="../../generated/data_forced/">Data forced column model</a></li><li><a class="tocitem" href="../../generated/kelp/">Model with particles (kelp) interacting with the biogeochemistry</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Model components and setup</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Biogeochemical models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_components/biogeochemical/">Overview</a></li><li><a class="tocitem" href="../../model_components/biogeochemical/LOBSTER/">LOBSTER</a></li><li><a class="tocitem" href="../../model_components/biogeochemical/NPZ/">NPZD</a></li></ul></li><li><a class="tocitem" href="../../model_components/air-sea-gas/">Air-sea gas exchange</a></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Sediment models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_components/sediments/">Overview</a></li><li><a class="tocitem" href="../../model_components/sediments/simple_multi_g/">Simple Multi-G</a></li><li><a class="tocitem" href="../../model_components/sediments/instant_remineralisation/">Instant remineralisation</a></li></ul></li><li><a class="tocitem" href="../../model_components/light/">Light attenuation models</a></li><li><input class="collapse-toggle" id="menuitem-4-5" type="checkbox"/><label class="tocitem" for="menuitem-4-5"><span class="docs-label">Individuals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_components/individuals/">Overview</a></li><li><a class="tocitem" href="../../model_components/individuals/slatissima/">Sugar Kelp (Broch and Slagstad 2012 ++)</a></li></ul></li><li><a class="tocitem" href="../../model_components/utils/">Utilities</a></li></ul></li><li><a class="tocitem" href="../../model_implementation/">Implementing new models</a></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Numerical implementation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../numerical_implementation/positivity-preservation/">Positivity preservation</a></li></ul></li><li><a class="tocitem" href="../../visualization/">Visualization</a></li><li><a class="tocitem" href="../../contributing/">Contibutors guide</a></li><li><a class="tocitem" href="../../references/">References</a></li><li><input class="collapse-toggle" id="menuitem-10" type="checkbox" checked/><label class="tocitem" for="menuitem-10"><span class="docs-label">Appendix</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Library</a><ul class="internal"><li><a class="tocitem" href="#OceanBioME.jl"><span>OceanBioME.jl</span></a></li><li><a class="tocitem" href="#Biogeochemical-Models"><span>Biogeochemical Models</span></a></li><li><a class="tocitem" href="#Light-Attenuation-Models"><span>Light Attenuation Models</span></a></li><li><a class="tocitem" href="#Boundary-Conditions"><span>Boundary Conditions</span></a></li><li><a class="tocitem" href="#Box-Model"><span>Box Model</span></a></li></ul></li><li><a class="tocitem" href="../function_index/">Function index</a></li><li><input class="collapse-toggle" id="menuitem-10-3" type="checkbox"/><label class="tocitem" for="menuitem-10-3"><span class="docs-label">Parameters</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/Biogeochemistry_parameters/">Biogeochemistry</a></li><li><a class="tocitem" href="../../generated/Biogeochemistry_parameters/">Biogeochemistry</a></li><li><a class="tocitem" href="../../generated/SLatissima_parameters/">SLatissima</a></li><li><a class="tocitem" href="../../generated/TwoBandPhotosyntheticallyActiveRadiation_parameters/">TwoBandPhotosyntheticallyActiveRadiation</a></li><li><a class="tocitem" href="../../generated/SimpleMultiG_parameters/">SimpleMultiG</a></li><li><a class="tocitem" href="../../generated/InstantRemineralisation_parameters/">InstantRemineralisation</a></li><li><a class="tocitem" href="../../generated/OceanBioME.Boundaries.pCO₂_parameters/">OceanBioME.Boundaries.pCO₂</a></li><li><a class="tocitem" href="../../generated/CO₂ air-sea exchange_parameters/">CO₂ air-sea exchange</a></li><li><a class="tocitem" href="../../generated/O₂ air-sea exchange_parameters/">O₂ air-sea exchange</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Appendix</a></li><li class="is-active"><a href>Library</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Library</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/OceanBioME/OceanBioME.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/OceanBioME/OceanBioME.jl/blob/main/docs/src/appendix/library.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="library_api"><a class="docs-heading-anchor" href="#library_api">Library</a><a id="library_api-1"></a><a class="docs-heading-anchor-permalink" href="#library_api" title="Permalink"></a></h1><p>Documenting the user interface.</p><h2 id="OceanBioME.jl"><a class="docs-heading-anchor" href="#OceanBioME.jl">OceanBioME.jl</a><a id="OceanBioME.jl-1"></a><a class="docs-heading-anchor-permalink" href="#OceanBioME.jl" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.OceanBioME" href="#OceanBioME.OceanBioME"><code>OceanBioME.OceanBioME</code></a> — <span class="docstring-category">Module</span></header><section><div><p>A fast and flexible modelling environment for modelling the coupled interactions between ocean biogeochemistry, carbonate chemistry, and physics.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/OceanBioME.jl#L1-L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.Biogeochemistry-Tuple{Any}" href="#OceanBioME.Biogeochemistry-Tuple{Any}"><code>OceanBioME.Biogeochemistry</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Biogeochemistry(underlying_biogeochemistry;
                light_attenuation = nothing,
                sediment = nothing,
                particles = nothing,
                modifiers = nothing)</code></pre><p>Construct a biogeochemical model based on <code>underlying_biogeochemistry</code> which may have a <code>light_attenuation</code> model, <code>sediment</code>, <code>particles</code>, and <code>modifiers</code>.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>light_attenuation_model</code>: light attenuation model which integrated the attenuation of available light</li><li><code>sediment_model</code>: slot for <code>AbstractSediment</code></li><li><code>particles</code>: slot for <code>BiogeochemicalParticles</code></li><li><code>modifiers</code>: slot for components which modify the biogeochemistry when the tendencies have been calculated or when the state is updated</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/OceanBioME.jl#L69-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.ScaleNegativeTracers-Tuple{Any}" href="#OceanBioME.ScaleNegativeTracers-Tuple{Any}"><code>OceanBioME.ScaleNegativeTracers</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ScaleNegativeTracers(; tracers, scalefactors = ones(length(tracers)), warn = false)</code></pre><p>Constructs a modifier to scale <code>tracers</code> so that none are negative. Use like:</p><pre><code class="language-julia hljs">modifier = ScaleNegativeTracers((:P, :Z, :N))
biogeochemistry = Biogeochemistry(...; modifier)</code></pre><p>This method is better, though still imperfect, method to prevent numerical errors that lead to negative tracer values compared to <a href="#OceanBioME.ZeroNegativeTracers"><code>ZeroNegativeTracers</code></a>. Please see <a href="https://github.com/OceanBioME/OceanBioME.jl/discussions/48">discussion in github</a>.</p><p>Future plans include implement a positivity-preserving timestepping scheme as the ideal alternative.</p><p>If <code>warn</code> is true then scaling will raise a warning.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Utils/negative_tracers.jl#L50-L65">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.ScaleNegativeTracers-Tuple{Oceananigans.Biogeochemistry.AbstractBiogeochemistry, Any}" href="#OceanBioME.ScaleNegativeTracers-Tuple{Oceananigans.Biogeochemistry.AbstractBiogeochemistry, Any}"><code>OceanBioME.ScaleNegativeTracers</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ScaleNegativeTracers(model::UnderlyingBiogeochemicalModel; warn = false)</code></pre><p>Construct a modifier to scale the conserved tracers in <code>model</code>.</p><p>If <code>warn</code> is true then scaling will raise a warning.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Utils/negative_tracers.jl#L74-L80">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.ZeroNegativeTracers" href="#OceanBioME.ZeroNegativeTracers"><code>OceanBioME.ZeroNegativeTracers</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ZeroNegativeTracers(; exclude = ())</code></pre><p>Construct a modifier that zeroes any negative tracers excluding those listed in <code>exclude</code>.</p><div class="admonition is-danger"><header class="admonition-header">Tracer conservation</header><div class="admonition-body"><p>This method is <em>not</em> recommended as a way to preserve positivity of tracers since it does not conserve the total tracer.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Utils/negative_tracers.jl#L12-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.conserved_tracers-Tuple{Biogeochemistry}" href="#OceanBioME.conserved_tracers-Tuple{Biogeochemistry}"><code>OceanBioME.conserved_tracers</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">conserved_tracers(model::UnderlyingBiogeochemicalModel)</code></pre><p>Returns the names of tracers which together are conserved in <code>model</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/OceanBioME.jl#L157-L161">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.redfield-NTuple{6, Any}" href="#OceanBioME.redfield-NTuple{6, Any}"><code>OceanBioME.redfield</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">redfield(i, j, k, val_tracer_name, bgc, tracers)</code></pre><p>Returns the redfield ratio of <code>tracer_name</code> from <code>bgc</code> at <code>i</code>, <code>j</code>, <code>k</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/OceanBioME.jl#L136-L140">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.redfield-Tuple{Any, Any}" href="#OceanBioME.redfield-Tuple{Any, Any}"><code>OceanBioME.redfield</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">redfield(val_tracer_name, bgc)
redfield(val_tracer_name, bgc, tracers)</code></pre><p>Returns the redfield ratio of <code>tracer_name</code> from <code>bgc</code> when it is constant across the domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/OceanBioME.jl#L143-L148">source</a></section></article><h2 id="Biogeochemical-Models"><a class="docs-heading-anchor" href="#Biogeochemical-Models">Biogeochemical Models</a><a id="Biogeochemical-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Biogeochemical-Models" title="Permalink"></a></h2><h3 id="Nutrient-Phytoplankton-Zooplankton-Detritus"><a class="docs-heading-anchor" href="#Nutrient-Phytoplankton-Zooplankton-Detritus">Nutrient Phytoplankton Zooplankton Detritus</a><a id="Nutrient-Phytoplankton-Zooplankton-Detritus-1"></a><a class="docs-heading-anchor-permalink" href="#Nutrient-Phytoplankton-Zooplankton-Detritus" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.NPZDModel" href="#OceanBioME.NPZDModel"><code>OceanBioME.NPZDModel</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Nutrient-Phytoplankton-Zooplankton-Detritus model of <a href="../../references/#Kuhn2015">Kuhn <em>et al.</em> (2015)</a>.</p><p><strong>Tracers</strong></p><ul><li>Nutrients: N (mmol N/m³)</li><li>Phytoplankton: P (mmol N/m³)</li><li>Zooplankton: Z (mmol N/m³)</li><li>Detritus: D (mmol N/m³)</li></ul><p><strong>Required submodels</strong></p><ul><li>Photosynthetically available radiation: PAR (W/m²)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Models/AdvectedPopulations/NPZD.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.NPZDModel.NutrientPhytoplanktonZooplanktonDetritus-Union{Tuple{}, Tuple{M}, Tuple{P}, Tuple{S}, Tuple{LA}, Tuple{FT}} where {FT, LA, S, P, M}" href="#OceanBioME.NPZDModel.NutrientPhytoplanktonZooplanktonDetritus-Union{Tuple{}, Tuple{M}, Tuple{P}, Tuple{S}, Tuple{LA}, Tuple{FT}} where {FT, LA, S, P, M}"><code>OceanBioME.NPZDModel.NutrientPhytoplanktonZooplanktonDetritus</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">NutrientPhytoplanktonZooplanktonDetritus(; grid,
                                           initial_photosynthetic_slope::FT = 0.1953 / day, # 1/(W/m²)/s
                                           base_maximum_growth::FT = 0.6989 / day, # 1/s
                                           nutrient_half_saturation::FT = 2.3868, # mmol N/m³
                                           base_respiration_rate::FT = 0.066 / day, # 1/s/(mmol N / m³)
                                           phyto_base_mortality_rate::FT = 0.0101 / day, # 1/s/(mmol N / m³)
                                           maximum_grazing_rate::FT = 2.1522 / day, # 1/s
                                           grazing_half_saturation::FT = 0.5573, # mmol N/m³
                                           assimulation_efficiency::FT = 0.9116,
                                           base_excretion_rate::FT = 0.0102 / day, # 1/s/(mmol N / m³)
                                           zoo_base_mortality_rate::FT = 0.3395 / day, # 1/s/(mmol N / m³)²
                                           remineralization_rate::FT = 0.1213 / day, # 1/s

                                           surface_photosynthetically_active_radiation = default_surface_PAR,
                                           light_attenuation_model::LA =
                                               TwoBandPhotosyntheticallyActiveRadiation(; grid,
                                                                                          surface_PAR = surface_photosynthetically_active_radiation),
                                          sediment_model::S = nothing,

                                           sinking_speeds = (P = 0.2551/day, D = 2.7489/day),
                                           open_bottom::Bool = true,

                                           particles::P = nothing)</code></pre><p>Construct a Nutrient-Phytoplankton-Zooplankton-Detritus (<a href="../../model_components/biogeochemical/NPZ/#NPZD">NPZD</a>) biogeochemical model.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>grid</code>: (required) the geometry to build the model on, required to calculate sinking</li><li><code>initial_photosynthetic_slope</code>, ..., <code>remineralization_rate</code>: NPZD parameter values</li><li><code>surface_photosynthetically_active_radiation</code>: function (or array in the future) for the photosynthetically available radiation at the surface, should be shape <code>f(x, y, t)</code></li><li><code>light_attenuation_model</code>: light attenuation model which integrated the attenuation of available light</li><li><code>sediment_model</code>: slot for <code>AbstractSediment</code></li><li><code>sinking_speed</code>: named tuple of constant sinking, of fields (i.e. <code>ZFaceField(...)</code>) for any tracers which sink (convention is that a sinking speed is positive, but a field will need to follow the usual down being negative)</li><li><code>open_bottom</code>: should the sinking velocity be smoothly brought to zero at the bottom to prevent the tracers leaving the domain</li><li><code>particles</code>: slot for <code>BiogeochemicalParticles</code></li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using OceanBioME

julia&gt; using Oceananigans

julia&gt; grid = RectilinearGrid(size=(20, 30), extent=(200, 200), topology=(Bounded, Flat, Bounded));

julia&gt; model = NutrientPhytoplanktonZooplanktonDetritus(; grid)
NutrientPhytoplanktonZooplanktonDetritus{Float64} model, with (:P, :D) sinking 
 Light attenuation: Two-band light attenuation model (Float64)
 Sediment: Nothing
 Particles: Nothing
 Modifiers: Nothing</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Models/AdvectedPopulations/NPZD.jl#L98-L154">source</a></section></article><h3 id="The-Lodyc-DAMTP-Ocean-Biogeochemical-Simulation-Tools-for-Ecosystem-and-Resources-(LOBSTER)"><a class="docs-heading-anchor" href="#The-Lodyc-DAMTP-Ocean-Biogeochemical-Simulation-Tools-for-Ecosystem-and-Resources-(LOBSTER)">The Lodyc-DAMTP Ocean Biogeochemical Simulation Tools for Ecosystem and Resources (LOBSTER)</a><a id="The-Lodyc-DAMTP-Ocean-Biogeochemical-Simulation-Tools-for-Ecosystem-and-Resources-(LOBSTER)-1"></a><a class="docs-heading-anchor-permalink" href="#The-Lodyc-DAMTP-Ocean-Biogeochemical-Simulation-Tools-for-Ecosystem-and-Resources-(LOBSTER)" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.LOBSTERModel" href="#OceanBioME.LOBSTERModel"><code>OceanBioME.LOBSTERModel</code></a> — <span class="docstring-category">Module</span></header><section><div><p>The Lodyc-DAMTP Ocean Biogeochemical Simulation Tools for Ecosystem and Resources (LOBSTER) model.</p><p><strong>Tracers</strong></p><ul><li>Nitrates: NO₃ (mmol N/m³)</li><li>Ammonia: NH₄ (mmol N/m³)</li><li>Phytoplankton: P (mmol N/m³)</li><li>Zooplankton: Z (mmol N/m³)</li><li>Small (slow sinking) particulate organic matter: sPOM (mmol N/m³)</li><li>Large (fast sinking) particulate organic matter: bPOM (mmol N/m³)</li><li>Dissolved organic matter: DOM (mmol N/m³)</li></ul><p><strong>Optional tracers</strong></p><p>Carbonate chemistry</p><ul><li>Dissolved inorganic carbon: DIC (mmol C/m³)</li><li>Alkalinity: Alk (meq/m³)</li></ul><p>Oxygen chemistry</p><ul><li>Oxygen: O₂ (mmol O₂/m³)</li></ul><p>Variable redfield</p><ul><li>Small (slow sinking) particulate organic matter carbon content: sPOC (mmol C/m³)</li><li>Large (fast sinking) particulate organic matter carbon content: bPOC (mmol C/m³)</li><li>Dissolved organic matter carbon content: DOC (mmol C/m³)</li><li>When this option is enabled then the usual sPOM and bPOM change to sPON and bPON as they explicitly represent the nitrogen contained in the particulate matter</li></ul><p><strong>Required submodels</strong></p><ul><li>Photosynthetically available radiation: PAR (W/m²)</li></ul><p>For optional tracers:</p><ul><li>Temperature: T (ᵒC)</li><li>Salinity: S (‰)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Models/AdvectedPopulations/LOBSTER/LOBSTER.jl#L1-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.LOBSTERModel.LOBSTER-Union{Tuple{}, Tuple{M}, Tuple{P}, Tuple{S}, Tuple{LA}, Tuple{FT}} where {FT, LA, S, P, M}" href="#OceanBioME.LOBSTERModel.LOBSTER-Union{Tuple{}, Tuple{M}, Tuple{P}, Tuple{S}, Tuple{LA}, Tuple{FT}} where {FT, LA, S, P, M}"><code>OceanBioME.LOBSTERModel.LOBSTER</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">LOBSTER(; grid,
          phytoplankton_preference::FT = 0.5,
          maximum_grazing_rate::FT = 9.26e-6, # 1/s
          grazing_half_saturation::FT = 1.0, # mmol N/m³
          light_half_saturation::FT = 33.0, # W/m² (?)
          nitrate_ammonia_inhibition::FT = 3.0,
          nitrate_half_saturation::FT = 0.7, # mmol N/m³
          ammonia_half_saturation::FT = 0.001, # mmol N/m³
          maximum_phytoplankton_growthrate::FT = 1.21e-5, # 1/s
          zooplankton_assimilation_fraction::FT = 0.7,
          zooplankton_mortality::FT = 2.31e-6, # 1/s/mmol N/m³
          zooplankton_excretion_rate::FT = 5.8e-7, # 1/s
          phytoplankton_mortality::FT = 5.8e-7, # 1/s
          small_detritus_remineralisation_rate::FT = 5.88e-7, # 1/s
          large_detritus_remineralisation_rate::FT = 5.88e-7, # 1/s
          phytoplankton_exudation_fraction::FT = 0.05,
          nitrification_rate::FT = 5.8e-7, # 1/s
          ammonia_fraction_of_exudate::FT = 0.75,
          ammonia_fraction_of_excriment::FT = 0.5,
          ammonia_fraction_of_detritus::FT = 0.0,
          phytoplankton_redfield::FT = 6.56, # mol C/mol N
          organic_redfield::FT = 6.56, # mol C/mol N
          phytoplankton_chlorophyll_ratio::FT = 1.31, # g Chl/mol N
          organic_carbon_calcate_ratio::FT = 0.1, # mol CaCO₃/mol C
          respiration_oxygen_nitrogen_ratio::FT = 10.75, # mol O/molN
          nitrification_oxygen_nitrogen_ratio::FT = 2.0, # mol O/molN
          slow_sinking_mortality_fraction::FT = 0.5,
          fast_sinking_mortality_fraction::FT = 0.5,
          dissolved_organic_breakdown_rate::FT = 3.86e-7, # 1/s
          zooplankton_calcite_dissolution::FT = 0.3,

          surface_photosynthetically_active_radiation::SPAR = default_surface_PAR,

          light_attenuation_model::LA =
              TwoBandPhotosyntheticallyActiveRadiation(; grid,
                                                         surface_PAR = surface_photosynthetically_active_radiation),
          sediment_model::S = nothing,

          carbonates::Bool = false,
          oxygen::Bool = false,
          variable_redfield = false,

          sinking_speed = (sPOM = 3.47e-5, bPOM = 200/day),
          open_bottom::Bool = true,

          particles::P = nothing)</code></pre><p>Construct an instance of the <a href="../../model_components/biogeochemical/LOBSTER/#LOBSTER">LOBSTER</a> biogeochemical model.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>grid</code>: (required) the geometry to build the model on, required to calculate sinking</li><li><code>phytoplankton_preference</code>, ..., <code>dissolved_organic_breakdown_rate</code>: LOBSTER parameter values</li><li><code>surface_photosynthetically_active_radiation</code>: funciton (or array in the future) for the photosynthetically available radiation at the surface, should be shape <code>f(x, y, t)</code></li><li><code>light_attenuation_model</code>: light attenuation model which integrated the attenuation of available light</li><li><code>sediment_model</code>: slot for <code>AbstractSediment</code></li><li><code>carbonates</code>, <code>oxygen</code>, and <code>variable_redfield</code>: include models for carbonate chemistry and/or oxygen chemistry and/or variable redfield ratio dissolved and particulate organic matter</li><li><code>sinking_speed</code>: named tuple of constant sinking, of fields (i.e. <code>ZFaceField(...)</code>) for any tracers which sink (convention is that a sinking speed is positive, but a field will need to follow the usual down being negative)</li><li><code>open_bottom</code>: should the sinking velocity be smoothly brought to zero at the bottom to prevent the tracers leaving the domain</li><li><code>particles</code>: slot for <code>BiogeochemicalParticles</code></li></ul><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using OceanBioME

julia&gt; using Oceananigans

julia&gt; grid = RectilinearGrid(size=(3, 3, 30), extent=(10, 10, 200));

julia&gt; model = LOBSTER(; grid)
LOBSTER{Float64} with carbonates ❌, oxygen ❌, variable Redfield ratio ❌and (:sPOM, :bPOM) sinking 
 Light attenuation: Two-band light attenuation model (Float64)
 Sediment: Nothing
 Particles: Nothing
 Modifiers: Nothing</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Models/AdvectedPopulations/LOBSTER/LOBSTER.jl#L175-L255">source</a></section></article><h3 id="Sugar-kelp-(Saccharina-latissima)"><a class="docs-heading-anchor" href="#Sugar-kelp-(Saccharina-latissima)">Sugar kelp (Saccharina latissima)</a><a id="Sugar-kelp-(Saccharina-latissima)-1"></a><a class="docs-heading-anchor-permalink" href="#Sugar-kelp-(Saccharina-latissima)" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.SLatissimaModel" href="#OceanBioME.SLatissimaModel"><code>OceanBioME.SLatissimaModel</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Sugar kelp model of <a href="../../references/#Broch2012">Broch and Slagstad (2012)</a> and updated by <a href="../../references/#Broch2013">Broch <em>et al.</em> (2013)</a>, <a href="../../references/#Fossberg2018">Fossberg <em>et al.</em> (2018)</a>, and <a href="../../references/#Broch2019">Broch <em>et al.</em> (2019)</a>.</p><p><strong>Prognostic properties</strong></p><ul><li>Area: A (dm²)</li><li>Nitrogen reserve: N (gN/gSW)</li><li>Carbon reserve: C (gC/gSW)</li></ul><p><strong>Tracer dependencies</strong></p><ul><li>Nitrates: NO₃ (mmol N/m³)</li><li>Photosynthetically available radiation: PAR (einstein/m²/day)</li></ul><p><strong>Optional</strong></p><ul><li>Ammonia: NH₄ (mmol N/m³)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Models/Individuals/SLatissima.jl#L1-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.SLatissimaModel.SLatissima" href="#OceanBioME.SLatissimaModel.SLatissima"><code>OceanBioME.SLatissimaModel.SLatissima</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SLatissima(; architecture :: AR = CPU(),
             growth_rate_adjustment :: FT = 4.5,
             photosynthetic_efficiency :: FT = 4.15e-5 * 24 * 10^6 / (24 * 60 * 60),
             minimum_carbon_reserve :: FT = 0.01,
             structural_carbon :: FT = 0.2,
             exudation :: FT = 0.5,
             erosion :: FT = 0.22,
             saturation_irradiance :: FT = 90 * day/ (10 ^ 6),
             structural_dry_weight_per_area :: FT = 0.5,
             structural_dry_to_wet_weight :: FT = 0.0785,
             carbon_reserve_per_carbon :: FT = 2.1213,
             nitrogen_reserve_per_nitrogen :: FT = 2.72,
             minimum_nitrogen_reserve :: FT = 0.0126,
             maximum_nitrogen_reserve :: FT = 0.0216,
             growth_adjustment_2 :: FT = 0.039 / (2 * (1 - minimum_nitrogen_reserve / maximum_nitrogen_reserve)),
             growth_adjustment_1 :: FT = 0.18 / (2 * (1 - minimum_nitrogen_reserve / maximum_nitrogen_reserve)) - growth_adjustment_2,
             maximum_specific_growth_rate :: FT = 0.18,
             structural_nitrogen :: FT = 0.0146,
             photosynthesis_at_ref_temp_1 :: FT = 1.22e-3 * 24,
             photosynthesis_at_ref_temp_2 :: FT = 1.3e-3 * 24,
             photosynthesis_ref_temp_1 :: FT = 285.0,
             photosynthesis_ref_temp_2 :: FT = 288.0,
             photoperiod_1 :: FT = 0.85,
             photoperiod_2 :: FT = 0.3,
             respiration_at_ref_temp_1 :: FT = 2.785e-4 * 24,
             respiration_at_ref_temp_2 :: FT = 5.429e-4 * 24,
             respiration_ref_temp_1 :: FT = 285.0,
             respiration_ref_temp_2 :: FT = 290.0,
             photosynthesis_arrhenius_temp :: FT = (1 / photosynthesis_ref_temp_1 - 1 / photosynthesis_ref_temp_2) ^ -1 * log(photosynthesis_at_ref_temp_2 / photosynthesis_at_ref_temp_1),
             photosynthesis_low_temp :: FT = 271.0,
             photosynthesis_high_temp :: FT = 296.0,
             photosynthesis_high_arrhenius_temp :: FT = 1414.87,
             photosynthesis_low_arrhenius_temp :: FT = 4547.89,
             respiration_arrhenius_temp :: FT = (1 / respiration_ref_temp_1 - 1 / respiration_ref_temp_2) ^ -1 * log(respiration_at_ref_temp_2 / respiration_at_ref_temp_1),
             current_speed_for_0p65_uptake :: FT = 0.03,
             nitrate_half_saturation :: FT = 4.0,
             ammonia_half_saturation :: FT = 1.3,
             maximum_nitrate_uptake :: FT = 10 * structural_dry_weight_per_area * 24 * 14 / (10^6),
             maximum_ammonia_uptake :: FT = 12 * structural_dry_weight_per_area * 24 * 14 / (10^6),
             current_1 :: FT = 0.72,
             current_2 :: FT = 0.28,
             current_3 :: FT = 0.045,
             respiration_reference_A :: FT = 1.11e-4 * 24,
             respiration_reference_B :: FT = 5.57e-5 * 24,
             exudation_redfield_ratio :: FT = Inf,

             prescribed_velocity :: U = 0.1,

             #position
             x :: P = arch_array(architecture, [0.0])
             y :: P = arch_array(architecture, zeros(Float64, length(x))),
             z :: P = arch_array(architecture, zeros(Float64, length(x))),

             #properties
             A :: P = arch_array(architecture, ones(Float64, length(x)) * 30),
             N :: P = arch_array(architecture, ones(Float64, length(x)) * 0.01),
             C :: P = arch_array(architecture, ones(Float64, length(x)) * 0.1),

             #feedback
             nitrate_uptake :: P = arch_array(architecture, zeros(Float64, length(x))),
             ammonia_uptake :: P = arch_array(architecture, zeros(Float64, length(x))),
             primary_production :: P = arch_array(architecture, zeros(Float64, length(x))),
             frond_exudation :: P = arch_array(architecture, zeros(Float64, length(x))),
             nitrogen_erosion :: P = arch_array(architecture, zeros(Float64, length(x))),
             carbon_erosion :: P = arch_array(architecture, zeros(Float64, length(x))),

             custom_dynamics :: F = no_dynamics,

             scalefactor :: FT = 1.0,
             latitude :: FT = 57.5)</code></pre><p><strong>Keyword Arguments</strong></p><ul><li><code>architecture</code>: the architecture to adapt arrays to</li><li><code>growth_rate_adjustment</code>, ..., <code>exudation_redfield_ratio</code>: parameter values</li><li><code>prescribed_velocity</code>: functions for the relative velocity <code>f(x, y, z, t)</code></li><li><code>x</code>,<code>y</code> and <code>z</code>: positions of the particles</li><li><code>A</code>, <code>N</code>, and <code>C</code>: area, nitrogen, and carbon reserves</li><li><code>nitrate_uptake</code> ... <code>carbon_erosion</code>: diagnostic values coupled to tracer fields</li><li><code>custom_dynamics</code>: place to add any function of form <code>f!(particles, model, bgc, Δt)</code></li><li><code>scalefactor</code>: scalar scaling for tracer coupling</li><li><code>latitude</code>: model latitude for seasonal growth modulation</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Models/Individuals/SLatissima.jl#L41-L125">source</a></section></article><h2 id="Light-Attenuation-Models"><a class="docs-heading-anchor" href="#Light-Attenuation-Models">Light Attenuation Models</a><a id="Light-Attenuation-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Light-Attenuation-Models" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.Light" href="#OceanBioME.Light"><code>OceanBioME.Light</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Light attenuation by chlorophyll as described by <a href="../../references/#Karleskind2011">Karleskind <em>et al.</em> (2011)</a> (implemented as twoBand) and <a href="../../references/#Morel1988">Morel (1988)</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Light/Light.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.Light.TwoBandPhotosyntheticallyActiveRadiation-Union{Tuple{}, Tuple{SPAR}, Tuple{FT}} where {FT, SPAR}" href="#OceanBioME.Light.TwoBandPhotosyntheticallyActiveRadiation-Union{Tuple{}, Tuple{SPAR}, Tuple{FT}} where {FT, SPAR}"><code>OceanBioME.Light.TwoBandPhotosyntheticallyActiveRadiation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">TwoBandPhotosyntheticallyActiveRadiation(; grid, 
                                           water_red_attenuation::FT = 0.225, # 1/m
                                           water_blue_attenuation::FT = 0.0232, # 1/m
                                           chlorophyll_red_attenuation::FT = 0.037, # 1/(m * (mgChl/m³) ^ eʳ)
                                           chlorophyll_blue_attenuation::FT = 0.074, # 1/(m * (mgChl/m³) ^ eᵇ)
                                           chlorophyll_red_exponent::FT = 0.629,
                                           chlorophyll_blue_exponent::FT = 0.674,
                                           pigment_ratio::FT = 0.7,
                                           phytoplankton_chlorophyll_ratio::FT = 1.31,
                                           surface_PAR::SPAR = (x, y, t) -&gt; 100 * max(0.0, cos(t * π / 12hours)))</code></pre><p><strong>Keyword Arguments</strong></p><ul><li><code>grid</code>: grid for building the model on</li><li><code>water_red_attenuation</code>, ..., <code>phytoplankton_chlorophyll_ratio</code>: parameter values</li><li><code>surface_PAR</code>: function (or array in the future) for the photosynthetically available radiation at the surface,   which should be <code>f(x, y, t)</code> where <code>x</code> and <code>y</code> are the native coordinates (i.e. meters for rectilinear grids  and latitude/longitude as appropriate)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Light/2band.jl#L76-L96">source</a></section></article><h2 id="Boundary-Conditions"><a class="docs-heading-anchor" href="#Boundary-Conditions">Boundary Conditions</a><a id="Boundary-Conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Boundary-Conditions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.Boundaries" href="#OceanBioME.Boundaries"><code>OceanBioME.Boundaries</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Boundary conditions for air/sea and sediment flux. </p><p>Currently implemented:</p><ul><li><p>gasexchange (<a href="../../references/#Wanninkhof1992">Wanninkhof, 1992</a>)</p><ul><li>Generic air-sea flux model described by <a href="../../references/#Wanninkhof1992">Wanninkhof (1992)</a> but only setup for CO₂ and O₂.</li><li>Forces the DIC and oxygen fields, and requires temp (in centigrade) and salinity, plus current DIC and ALK concentration.</li></ul></li><li><p>Sediments</p><ul><li>Soetaert (<a href="../../references/#Soetaert2000">Soetaert <em>et al.</em>, 2000</a>)<ul><li>simple (integrated) sediment model described by <a href="../../references/#Soetaert2000">Soetaert <em>et al.</em> (2000)</a>, where organic matter  that sinks to the bottom is stored, decays into NO₃ and NH₄, and takes up O₂ in the process.</li><li>Extended to attribute the corresponding release of DIC.</li><li>Forced by O₂, NO₃, NH₄ and particle concentration in bottom cell.</li></ul></li><li>Instant remineralisation <ul><li>simple model from <a href="../../references/#Aumont2015">Aumont <em>et al.</em> (2015)</a>, where sinking organic matter is instantly remineralised  and returned to the bottom cell</li><li>some fraction is stored permanently in the sediment at an efficiency given by <a href="../../references/#RemineralisationFraction">Dunne <em>et al.</em> (2007)</a></li></ul></li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Boundaries/Boundaries.jl#L1-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.Boundaries.GasExchange-Union{Tuple{}, Tuple{PCO}, Tuple{AP}, Tuple{AC}, Tuple{FT}, Tuple{βP}, Tuple{ScP}} where {ScP, βP, FT, AC, AP, PCO}" href="#OceanBioME.Boundaries.GasExchange-Union{Tuple{}, Tuple{PCO}, Tuple{AP}, Tuple{AC}, Tuple{FT}, Tuple{βP}, Tuple{ScP}} where {ScP, βP, FT, AC, AP, PCO}"><code>OceanBioME.Boundaries.GasExchange</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">GasExchange(; gas,
              schmidt_params::ScP = (CO₂ = (A=2073.1, B=125.62, C=3.6276, D=0.043219),
                               O₂ = (A=1953.4, B=128.0, C=3.9918, D=0.050091))[gas],
              solubility_params::βP = (CO₂ = (A₁=-60.2409, A₂=93.4517, A₃=23.3585, B₁=0.023517, B₂=-0.023656, B₃=0.0047036),
                                 O₂ = (A₁=-58.3877, A₂=85.8079, A₃=23.8439, B₁=-0.034892, B₂=0.015568, B₃=-0.0019387))[gas],
              ocean_density::FT = 1026, # kg/m³
              air_concentration::AC = (CO₂ = 413.4, O₂ = 9352.7)[gas], # ppmv, mmolO₂/m³ (20.95 mol O₂/mol air, 0.0224m^3/mol air)
              air_pressure::FT = 1.0, # atm
              average_wind_speed::FT = 10, # m/s
              field_dependencies = (CO₂ = (:DIC, :ALK), O₂ = (:OXY, ))[gas])</code></pre><p>Construct an Oceananigans <code>FluxBoundaryCondition</code> for the exchange of <code>gas</code> with the relevant tracer (i.e., DIC for CO₂ and oxygen for O₂). Please see note for other gases.</p><p><strong>Keyword arguments</strong></p><ul><li><code>gas</code>: (required) the gas to be exchanged, if <code>:CO₂</code> or <code>:O₂</code> are specified then all other settings may be infered</li><li><code>schmidt_params</code> : named tuple of parameters for calculating the Schmidt number using the parameterisation of <a href="../../references/#Wanninkhof1992">Wanninkhof (1992)</a></li><li><code>solubility_params</code> : named tuple of parameters for calculating the solubility (for O₂ the Bunsen solubility and CO₂ K₀, see note)</li><li><code>ocean_density</code> : density of the ocean in kg/m³</li><li><code>air_concentratio</code> : concentration of the gas in air in relivant units (i.e. ppmv for CO₂ and mmol O₂/m³ for O₂), can also be a function of x, y, t, or a field</li><li><code>air_pressure</code> : air pressure in atm (only used for CO₂), can also be a function of x, y, t, or a field</li><li><code>average_wind_speed</code> : average wind speed at 10m used to calculate the gas transfer velocity by the <a href="../../references/#Wanninkhof1992">Wanninkhof (1992)</a> parameterisation</li><li><code>field_dependencies</code> : tracer fields that gas exchange depends on, if the defaults have different names in your model you can specify as long as they are in the same order</li><li><code>pCO₂</code> : pCO₂ calculator</li></ul><div class="admonition is-info"><header class="admonition-header">Gases other than CO₂ and O₂</header><div class="admonition-body"><p>This model is fully capable of exchanging any gas but the parameters have only been configured for CO₂ and O₂, and the specific formulation is only ensured for these gasses. For any gas where the <a href="../../references/#Wanninkhof1992">Wanninkhof (1992)</a> parameterisation returns the Bunsen Solubility Coefficient this model will work out of the box and can just be passed new parameters. For the other solubility types (i.e. K₀, K&#39; and f) you will need to overload the <code>(gasexchange::GasExchange)</code> function to ensure the correct formulaiton.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Boundaries/gasexchange.jl#L162-L195">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.Boundaries.Sediments.InstantRemineralisation" href="#OceanBioME.Boundaries.Sediments.InstantRemineralisation"><code>OceanBioME.Boundaries.Sediments.InstantRemineralisation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct InstantRemineralisation</code></pre><p>Hold the parameters and fields the simplest benthic boundary layer where organic carbon is assumed to remineralise instantly with some portion  becoming N, and a fraction being permanently buried.</p><p>Burial efficiency from <a href="../../references/#RemineralisationFraction">Dunne <em>et al.</em> (2007)</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Boundaries/Sediments/instant_remineralization.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.Boundaries.Sediments.InstantRemineralisation-Tuple{}" href="#OceanBioME.Boundaries.Sediments.InstantRemineralisation-Tuple{}"><code>OceanBioME.Boundaries.Sediments.InstantRemineralisation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">InstantRemineralisation(; grid,
    burial_efficiency_constant1::FT = 0.013,
    burial_efficiency_constant2::FT = 0.53,
    burial_efficiency_half_saturation::FT = 7)</code></pre><p>Return a single-layer instant remineralisaiton model for NPZD bgc models.</p><p><strong>Example</strong></p><pre><code class="language- hljs">using OceanBioME, Oceananigans, OceanBioME.Sediments

grid = RectilinearGrid(size=(3, 3, 30), extent=(10, 10, 200))

sediment_model = InstantRemineralisation(; grid)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Boundaries/Sediments/instant_remineralization.jl#L33-L51">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.Boundaries.Sediments.SimpleMultiG" href="#OceanBioME.Boundaries.Sediments.SimpleMultiG"><code>OceanBioME.Boundaries.Sediments.SimpleMultiG</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct SimpleMultiG</code></pre><p>Hold the parameters and fields for a simple &quot;multi G&quot; single-layer sediment model. Based on the Level 3 model described by <a href="../../references/#Soetaert2000">Soetaert <em>et al.</em> (2000)</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Boundaries/Sediments/simple_multi_G.jl#L3-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.Boundaries.Sediments.SimpleMultiG-Tuple{}" href="#OceanBioME.Boundaries.Sediments.SimpleMultiG-Tuple{}"><code>OceanBioME.Boundaries.Sediments.SimpleMultiG</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">SimpleMultiG(; grid
               fast_decay_rate = 2/day,
               slow_decay_rate = 0.2/day,
               fast_redfield = 0.1509,
               slow_redfield = 0.13,
               fast_fraction = 0.74,
               slow_fraction = 0.26,
               refactory_fraction = 0.1,
               nitrate_oxidation_params = arch_array(architecture(grid), [- 1.9785, 0.2261, -0.0615, -0.0289, - 0.36109, - 0.0232]),
               denitrification_params = arch_array(architecture(grid), [- 3.0790, 1.7509, 0.0593, - 0.1923, 0.0604, 0.0662]),
               anoxic_params = arch_array(architecture(grid), [- 3.9476, 2.6269, - 0.2426, -1.3349, 0.1826, - 0.0143]),
               solid_dep_params = arch_array(architecture(grid), [0.233, 0.336, 982.0, - 1.548]))</code></pre><p>Return a single-layer &quot;multi G&quot; sediment model (<code>SimpleMultiG</code>) on <code>grid</code>, where parameters can be optionally specified.</p><p>The model is a single layer (i.e. does not include porous diffusion) model with three classes of sediment organic matter which decay at three different rates (fast, slow, refactory). The nitrification/denitrification/anoxic mineralisation fractions default to the parameterisation of Soetaert et al. 2000; doi:<a href="https://doi.org/10.1016/S0012-8252(00)00004-0">10.1016/S0012-8252(00)00004-0</a>.</p><p>This model has not yet been validated or compared to observational data. The variety of degridation processes is likely to be strongly dependent on oxygen availability (see <a href="https://bg.copernicus.org/articles/6/1273/2009/bg-6-1273-2009.pdf">https://bg.copernicus.org/articles/6/1273/2009/bg-6-1273-2009.pdf</a>) so it will therefore be important to also thoroughly validate the oxygen model (also currently limited).</p><p><strong>Example</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using OceanBioME, Oceananigans, OceanBioME.Sediments

julia&gt; grid = RectilinearGrid(size=(3, 3, 30), extent=(10, 10, 200));

julia&gt; sediment_model = SimpleMultiG(; grid)
┌ Warning: Sediment models are an experimental feature and have not yet been validated.
└ @ OceanBioME.Boundaries.Sediments ~/OceanBioME.jl/src/Boundaries/Sediments/simple_multi_G.jl:102
[ Info: This sediment model is currently only compatible with models providing NH₄, NO₃, O₂, and DIC.
Single-layer multi-G sediment model (Float64)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/Boundaries/Sediments/simple_multi_G.jl#L49-L90">source</a></section></article><h2 id="Box-Model"><a class="docs-heading-anchor" href="#Box-Model">Box Model</a><a id="Box-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Box-Model" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.BoxModels" href="#OceanBioME.BoxModels"><code>OceanBioME.BoxModels</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Integrate biogeochemical models on a single point</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/BoxModel/boxmodel.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.BoxModels.BoxModel-Union{Tuple{}, Tuple{C}, Tuple{TS}, Tuple{FT}, Tuple{B}} where {B, FT, TS, C}" href="#OceanBioME.BoxModels.BoxModel-Union{Tuple{}, Tuple{C}, Tuple{TS}, Tuple{FT}, Tuple{B}} where {B, FT, TS, C}"><code>OceanBioME.BoxModels.BoxModel</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">BoxModel(; biogeochemistry::B,
           stop_time::FT = 0.0,
           forcing = NamedTuple(),
           timestepper::TS = RungeKutta3TimeStepper((required_biogeochemical_tracers(biogeochemistry)..., required_biogeochemical_auxiliary_fields(biogeochemistry)...)),
           Δt::FT = 1.0,
           clock::C = Clock(0.0, 0, 1))</code></pre><p>Constructs a box model of a <code>biogeochemistry</code> model. Once this has been constructed you can set initial condiitons by <code>set!(model, X=1.0...)</code> and then <code>run!(model)</code>.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>biogeochemistry</code>: (required) an OceanBioME biogeochemical model, most models must be passed a <code>grid</code> which can be set to <code>BoxModelGrid()</code> for box models</li><li><code>stop_time</code>: end time of simulation</li><li><code>forcing</code>: NamedTuple of additional forcing functions for the biogeochemical tracers to be integrated</li><li><code>timestepper</code>: Timestepper to integrate model, only available is currently <code>RungeKutta3TimeStepper</code></li><li><code>Δt</code>: time step length</li><li><code>clock</code>: Oceananigans clock to keep track of time</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/BoxModel/boxmodel.jl#L37-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="OceanBioME.BoxModels.SaveBoxModel" href="#OceanBioME.BoxModels.SaveBoxModel"><code>OceanBioME.BoxModels.SaveBoxModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SaveBoxModel(filepath::FP)</code></pre><p>Construct object to save box model outputs at <code>filepath</code>.</p><p><strong>Arguments</strong></p><ul><li><code>filepath</code> - path to save results to</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/BoxModel/boxmodel.jl#L155-L164">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Oceananigans.Fields.set!-Tuple{BoxModel}" href="#Oceananigans.Fields.set!-Tuple{BoxModel}"><code>Oceananigans.Fields.set!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set!(model::BoxModel; kwargs...)</code></pre><p>Set the <code>values</code> for a <code>BoxModel</code></p><p><strong>Arguments</strong></p><ul><li><code>model</code> - the model to set the arguments for</li></ul><p><strong>Keyword Arguments</strong></p><ul><li>variables and value pairs to set</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/BoxModel/boxmodel.jl#L129-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Oceananigans.Simulations.run!-Tuple{BoxModel}" href="#Oceananigans.Simulations.run!-Tuple{BoxModel}"><code>Oceananigans.Simulations.run!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">run!(model::BoxModel; feedback_interval = 1000, save_interval = Inf, save = nothing)</code></pre><p>Run a box model.</p><p><strong>Arguments</strong></p><ul><li><code>model</code> - the <code>BoxModel</code> to solve</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>feedback_interval</code>: how often (number of iterations) to display progress</li><li><code>save_interval</code>: how often (number of iterations) to save output</li><li><code>save</code>: <code>SaveBoxModel</code> object to specify how to save output</li></ul><p>TODO: should abstract out to simulation like Oceananigans to add e.g. callbacks</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/e7d5d0d45358638b828e4fc2d54a07b454248814/src/BoxModel/boxmodel.jl#L95-L113">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../references/">« References</a><a class="docs-footer-nextpage" href="../function_index/">Function index »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Wednesday 15 November 2023 13:14">Wednesday 15 November 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
