<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · OceanBioME.jl</title><meta name="title" content="Home · OceanBioME.jl"/><meta property="og:title" content="Home · OceanBioME.jl"/><meta property="twitter:title" content="Home · OceanBioME.jl"/><meta name="description" content="Documentation for OceanBioME.jl."/><meta property="og:description" content="Documentation for OceanBioME.jl."/><meta property="twitter:description" content="Documentation for OceanBioME.jl."/><meta property="og:url" content="https://OceanBioME.github.io/OceanBioME/stable/"/><meta property="twitter:url" content="https://OceanBioME.github.io/OceanBioME/stable/"/><link rel="canonical" href="https://OceanBioME.github.io/OceanBioME/stable/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/citations.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img class="docs-light-only" src="assets/logo.png" alt="OceanBioME.jl logo"/><img class="docs-dark-only" src="assets/logo-dark.png" alt="OceanBioME.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href>OceanBioME.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Quick-install"><span>Quick install</span></a></li><li><a class="tocitem" href="#Running-your-first-model"><span>Running your first model</span></a></li><li><a class="tocitem" href="#Places-to-find-OceanBioME-information"><span>Places to find OceanBioME information</span></a></li><li><a class="tocitem" href="#Getting-in-touch"><span>Getting in touch</span></a></li><li><a class="tocitem" href="#Citing"><span>Citing</span></a></li><li><a class="tocitem" href="#Funding"><span>Funding</span></a></li></ul></li><li><a class="tocitem" href="quick_start/">Quick start</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="generated/box/">Box model</a></li><li><a class="tocitem" href="generated/column/">Simple column model</a></li><li><a class="tocitem" href="generated/eady/">Baroclinic instability</a></li><li><a class="tocitem" href="generated/data_forced/">Data forced column model</a></li><li><a class="tocitem" href="generated/kelp/">Model with particles (kelp) interacting with the biogeochemistry</a></li><li><a class="tocitem" href="generated/data_assimilation/">Data assimilation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">Model components and setup</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Biogeochemical models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="model_components/biogeochemical/">Overview</a></li><li><a class="tocitem" href="model_components/biogeochemical/LOBSTER/">LOBSTER</a></li><li><a class="tocitem" href="model_components/biogeochemical/NPZ/">NPZD</a></li></ul></li><li><a class="tocitem" href="model_components/air-sea-gas/">Air-sea gas exchange</a></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><label class="tocitem" for="menuitem-4-3"><span class="docs-label">Sediment models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="model_components/sediments/">Overview</a></li><li><a class="tocitem" href="model_components/sediments/simple_multi_g/">Simple Multi-G</a></li><li><a class="tocitem" href="model_components/sediments/instant_remineralisation/">Instant remineralisation</a></li></ul></li><li><a class="tocitem" href="model_components/light/">Light attenuation models</a></li><li><input class="collapse-toggle" id="menuitem-4-5" type="checkbox"/><label class="tocitem" for="menuitem-4-5"><span class="docs-label">Individuals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="model_components/individuals/">Overview</a></li><li><a class="tocitem" href="model_components/individuals/slatissima/">Sugar Kelp (Broch and Slagstad 2012 ++)</a></li></ul></li><li><a class="tocitem" href="model_components/utils/">Utilities</a></li></ul></li><li><a class="tocitem" href="model_implementation/">Implementing new models</a></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Numerical implementation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="numerical_implementation/positivity-preservation/">Positivity preservation</a></li></ul></li><li><a class="tocitem" href="visualization/">Visualization</a></li><li><a class="tocitem" href="contributing/">Contibutors guide</a></li><li><a class="tocitem" href="references/">References</a></li><li><input class="collapse-toggle" id="menuitem-10" type="checkbox"/><label class="tocitem" for="menuitem-10"><span class="docs-label">Appendix</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="appendix/library/">Library</a></li><li><a class="tocitem" href="appendix/function_index/">Function index</a></li><li><input class="collapse-toggle" id="menuitem-10-3" type="checkbox"/><label class="tocitem" for="menuitem-10-3"><span class="docs-label">Parameters</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="generated/LOBSTER_parameters/">LOBSTER</a></li><li><a class="tocitem" href="generated/NutrientPhytoplanktonZooplanktonDetritus_parameters/">NutrientPhytoplanktonZooplanktonDetritus</a></li><li><a class="tocitem" href="generated/SLatissima_parameters/">SLatissima</a></li><li><a class="tocitem" href="generated/TwoBandPhotosyntheticallyActiveRadiation_parameters/">TwoBandPhotosyntheticallyActiveRadiation</a></li><li><a class="tocitem" href="generated/SimpleMultiG_parameters/">SimpleMultiG</a></li><li><a class="tocitem" href="generated/InstantRemineralisation_parameters/">InstantRemineralisation</a></li><li><a class="tocitem" href="generated/OceanBioME.Boundaries.pCO₂_parameters/">OceanBioME.Boundaries.pCO₂</a></li><li><a class="tocitem" href="generated/CO₂ air-sea exchange_parameters/">CO₂ air-sea exchange</a></li><li><a class="tocitem" href="generated/O₂ air-sea exchange_parameters/">O₂ air-sea exchange</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/OceanBioME/OceanBioME.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/OceanBioME/OceanBioME.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="*Ocean*-*Bio*geochemical-*M*odelling-*E*nvironment-OceanBioME"><a class="docs-heading-anchor" href="#*Ocean*-*Bio*geochemical-*M*odelling-*E*nvironment-OceanBioME"><em>Ocean</em> <em>Bio</em>geochemical <em>M</em>odelling <em>E</em>nvironment - OceanBioME</a><a id="*Ocean*-*Bio*geochemical-*M*odelling-*E*nvironment-OceanBioME-1"></a><a class="docs-heading-anchor-permalink" href="#*Ocean*-*Bio*geochemical-*M*odelling-*E*nvironment-OceanBioME" title="Permalink"></a></h1><p>OceanBioME.jl is a fast and flexible ocean biogeochemical modelling environment. It is highly modular and is designed to make it easy to implement and use a variety of biogeochemical and physical models. OceanBioME is built to be coupled with physics models from <a href="https://github.com/CliMA/Oceananigans.jl">Oceananigans.jl</a> allowing simulations across a wide range of spatial scales ranging from a global hydrostatic free surface model to non-hydrostatic large-eddy simulations. OceanBioME was designed specifically for ocean carbon dioxide removal applications. Notably, it includes active particles which allow individual-based models to be seamlessly coupled with the flow physics, ecosystem models, and carbonate chemistry.</p><p>OceanBioME.jl currently provides a core of several biogeochemical models Nutrient–Phytoplankton–Zooplankton–Detritus (NPZD) and <a href="https://doi.org/10.1029/2004JC002588">LOBSTER</a>, a medium complexity model, air-sea gas exchange models to provide appropriate top boundary conditions, and sediment models to for the benthic boundary. <a href="https://doi.org/10.5194/gmd-8-2465-2015">PISCES</a> and other higher complexity models are in our future development plans.</p><p>OceanBioME.jl includes a framework for integrating the growth of biological/active Lagrangian particles which move around and can interact with the (Eulerian) tracer fields - for example, consuming nutrients and carbon dioxide while releasing dissolved organic material. A growth model for sugar kelp is currently implemented using active particles, and this model can be used in a variety of dynamical scenarios including free-floating or bottom-attached particles.</p><h2 id="Quick-install"><a class="docs-heading-anchor" href="#Quick-install">Quick install</a><a id="Quick-install-1"></a><a class="docs-heading-anchor-permalink" href="#Quick-install" title="Permalink"></a></h2><p>OceanBioME is a <a href="https://julialang.org/packages/">registered Julia package</a>. So to install it,</p><ol><li><p><a href="https://julialang.org/downloads/">Download Julia</a>.</p></li><li><p>Launch Julia and type</p></li></ol><pre><code class="language-julia hljs">julia&gt; using Pkg
julia&gt; Pkg.add(&quot;OceanBioME&quot;)</code></pre><div class="admonition is-compat"><header class="admonition-header">Julia 1.9</header><div class="admonition-body"><p>OceanBioME.jl requires Julia version 1.9 or later.</p></div></div><h2 id="Running-your-first-model"><a class="docs-heading-anchor" href="#Running-your-first-model">Running your first model</a><a id="Running-your-first-model-1"></a><a class="docs-heading-anchor-permalink" href="#Running-your-first-model" title="Permalink"></a></h2><p>As a simple example lets run a Nutrient-Phytoplankton-Zooplankton-Detritus (NPZD) model in a two-dimensional simulation of a buoyancy front. This example requires Oceananigans, so we install that first via:</p><pre><code class="language-julia hljs">using Pkg; Pkg.add(&quot;Oceananigans&quot;)</code></pre><p>and then:</p><pre><code class="language-julia hljs">using OceanBioME, Oceananigans
using Oceananigans.Units

grid = RectilinearGrid(CPU(), size = (160, 32), extent = (10000meters, 500meters), topology = (Bounded, Flat, Bounded))

biogeochemistry = NutrientPhytoplanktonZooplanktonDetritus(; grid)

model = NonhydrostaticModel(; grid, biogeochemistry,
                              advection = WENO(; grid),
			                  closure = AnisotropicMinimumDissipation(),
			                  buoyancy = SeawaterBuoyancy(constant_salinity = true))

@inline front(x, z, μ, δ) = μ + δ * tanh((x - 7000 + 4 * z) / 500)

Pᵢ(x, z) = ifelse(z &gt; -50, 0.03, 0.01)
Nᵢ(x, z) = front(x, z, 2.5, -2)
Tᵢ(x, z) = front(x, z, 9, 0.05)

set!(model, N = Nᵢ, P = Pᵢ, Z = Pᵢ, T = Tᵢ)

simulation = Simulation(model; Δt = 50, stop_time = 4days)

simulation.output_writers[:tracers] = JLD2OutputWriter(model, model.tracers,
                                                       filename = &quot;buoyancy_front.jld2&quot;,
                                                       schedule = TimeInterval(24minute),
                                                       overwrite_existing = true)

run!(simulation)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr36"><span class="sgr1">[ Info: </span></span>Initializing simulation...
<span class="sgr36"><span class="sgr1">[ Info: </span></span>    ... simulation initialization complete (880.518 ms)
<span class="sgr36"><span class="sgr1">[ Info: </span></span>Executing initial time step...
<span class="sgr36"><span class="sgr1">[ Info: </span></span>    ... initial time step complete (4.150 seconds).
<span class="sgr36"><span class="sgr1">[ Info: </span></span>Simulation is stopping after running for 1.234 minutes.
<span class="sgr36"><span class="sgr1">[ Info: </span></span>Simulation time 4 days equals or exceeds stop time 4 days.</code></pre><p>We can then load the saved output and visualize it:</p><pre><code class="language-julia hljs">T = FieldTimeSeries(&quot;buoyancy_front.jld2&quot;, &quot;T&quot;)
N = FieldTimeSeries(&quot;buoyancy_front.jld2&quot;, &quot;N&quot;)
P = FieldTimeSeries(&quot;buoyancy_front.jld2&quot;, &quot;P&quot;)

xc, yc, zc = nodes(T)

times = T.times

using CairoMakie

n = Observable(1)

T_lims = (8.94, 9.06)
N_lims = (0, 4.5)
P_lims = (0.007, 0.02)

Tₙ = @lift interior(T[$n], :, 1, :)
Nₙ = @lift interior(N[$n], :, 1, :)
Pₙ = @lift interior(P[$n], :, 1, :)

fig = Figure(size = (1000, 520), fontsize = 20)

title = @lift &quot;t = $(prettytime(times[$n]))&quot;
Label(fig[0, :], title)

axis_kwargs = (xlabel = &quot;x (m)&quot;, ylabel = &quot;z (m)&quot;, width = 770, yticks = [-400, -200, 0])
ax1 = Axis(fig[1, 1]; title = &quot;Temperature (°C)&quot;, axis_kwargs...)
ax2 = Axis(fig[2, 1]; title = &quot;Nutrients concentration (mmol N / m³)&quot;,axis_kwargs...)
ax3 = Axis(fig[3, 1]; title = &quot;Phytoplankton concentration (mmol N / m³)&quot;, axis_kwargs...)

hm1 = heatmap!(ax1, xc, zc, Tₙ, colorrange = T_lims, colormap = Reverse(:lajolla), interpolate = true)
hm2 = heatmap!(ax2, xc, zc, Nₙ, colorrange = N_lims, colormap = Reverse(:bamako), interpolate = true)
hm3 = heatmap!(ax3, xc, zc, Pₙ, colorrange = P_lims, colormap = Reverse(:bamako), interpolate = true)

Colorbar(fig[1, 2], hm1, ticks = [8.95, 9.0, 9.05])
Colorbar(fig[2, 2], hm2, ticks = [0, 2, 4])
Colorbar(fig[3, 2], hm3, ticks = [0.01, 0.02, 0.03])

rowgap!(fig.layout, 0)

record(fig, &quot;buoyancy_front.mp4&quot;, 1:length(times)) do i
    n[] = i
end</code></pre><p><video src="buoyancy_front.mp4" controls="true" title="buoyancy_front"><a href="buoyancy_front.mp4">buoyancy_front</a></video></p><p>In the example above, <code>OceanBioME.jl</code> provides the <code>biogeochemistry</code> and everything else is taken care of by <code>Oceananigans.jl</code>. For comprehensive documentation of the physics modelling see <a href="https://clima.github.io/OceananigansDocumentation/stable/">Oceananigans&#39; Documentation</a>; for biogeochemistry and other features we provide read below.</p><h2 id="Places-to-find-OceanBioME-information"><a class="docs-heading-anchor" href="#Places-to-find-OceanBioME-information">Places to find OceanBioME information</a><a id="Places-to-find-OceanBioME-information-1"></a><a class="docs-heading-anchor-permalink" href="#Places-to-find-OceanBioME-information" title="Permalink"></a></h2><ul><li><p>This documentation, which provides</p><ul><li>documented examples (browse them starting, e.g., from the <a href="generated/column/#OneD_column">single-column model</a>),</li><li>explanations of model implementation methods,</li><li>details of currently implemented models, and</li><li>a <a href="appendix/library/#library_api">library</a> documenting all user-facing objects and functions.</li></ul></li><li><p><a href="https://github.com/OceanBioME/OceanBioME.jl/discussions">Discussions on the OceanBioME github</a></p><p>If you&#39;ve got a question or something to talk about, don&#39;t hesitate to <a href="https://github.com/OceanBioME/OceanBioME.jl/discussions/new?">start a new discussion</a>!</p></li><li><p><a href="https://github.com/OceanBioME/OceanBioME.jl//issues">Issues</a> and <a href="https://github.com/OceanBioME/OceanBioME.jl/pulls">pull requests</a> also contain lots of information about problems we&#39;ve found, solutions we&#39;re trying to implement, and ideas for the future.</p></li></ul><h2 id="Getting-in-touch"><a class="docs-heading-anchor" href="#Getting-in-touch">Getting in touch</a><a id="Getting-in-touch-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-in-touch" title="Permalink"></a></h2><p>Whether you need help getting started with OceanBioME, found a bug, want OceanBioME to be more expanded, or just want to chat about our project, you can:</p><ul><li><a href="https://github.com/OceanBioME/OceanBioME.jl/discussions">Start a discussion</a>. </li><li><a href="https://github.com/OceanBioME/OceanBioME.jl/issues">Open an issue</a>. Issues are best if you think the OceanBioME source code needs attention: a bug, a sign error, an important missing feature, or a typo in the documentation.</li></ul><h2 id="Citing"><a class="docs-heading-anchor" href="#Citing">Citing</a><a id="Citing-1"></a><a class="docs-heading-anchor-permalink" href="#Citing" title="Permalink"></a></h2><p>If you use OceanBioME as part of your research, teaching, or other activities, we would be grateful if you could cite our work below and mention OceanBioME by name, as well as citing and <a href="https://clima.github.io/OceananigansDocumentation/stable/#Citing">acknowledging Oceananigans</a> as without them this package would not be possible.</p><pre><code class="language-bibtex hljs">@article{OceanBioMEJOSS,
  doi = {10.21105/joss.05669},
  url = {https://doi.org/10.21105/joss.05669},
  year = {2023},
  publisher = {The Open Journal},
  volume = {8},
  number = {90},
  pages = {5669},
  author = {Jago Strong-Wright and Si Chen and Navid C. Constantinou and Simone Silvestri and Gregory LeClaire Wagner and John R. Taylor},
  title = {{OceanBioME.jl: A flexible environment for modelling the coupled interactions between ocean biogeochemistry and physics}},
  journal = {Journal of Open Source Software}
}</code></pre><h2 id="Funding"><a class="docs-heading-anchor" href="#Funding">Funding</a><a id="Funding-1"></a><a class="docs-heading-anchor-permalink" href="#Funding" title="Permalink"></a></h2><p>OceanBioME.jl is supported through grants from the <a href="https://www.climaterepair.cam.ac.uk/">Center for Climate Repair at Cambridge</a> and the <a href="https://www.moore.org/">Gordon and Betty Moore Foundation</a>.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="quick_start/">Quick start »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.3.0 on <span class="colophon-date" title="Thursday 28 March 2024 17:54">Thursday 28 March 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
