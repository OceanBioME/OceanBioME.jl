<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Library · OceanBioME.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://OceanBioME.github.io/OceanBioME/stable/appendix/library/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.png" alt="OceanBioME.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.png" alt="OceanBioME.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">OceanBioME.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../quick_start/">Quick start</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Model components and setup</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Biogeochemical models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_components/biogeochemical/">Overview</a></li><li><a class="tocitem" href="../../model_components/biogeochemical/LOBSTER/">LOBSTER</a></li><li><a class="tocitem" href="../../model_components/biogeochemical/NPZ/">NPZD</a></li></ul></li><li><a class="tocitem" href="../../model_components/air-sea-gas/">Air-sea gas exchange</a></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Sediment models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_components/sediment/">Overview</a></li></ul></li><li><a class="tocitem" href="../../model_components/light/">Light attenuation models</a></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Individuals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_components/individuals/">Overview</a></li><li><a class="tocitem" href="../../model_components/individuals/slatissima/">Sugar Kelp (Broch and Slagstad 2012 ++)</a></li></ul></li><li><a class="tocitem" href="../../model_components/utils/">Utilities</a></li></ul></li><li><a class="tocitem" href="../../visualization/">Visualization</a></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/column/">Simple column model</a></li><li><a class="tocitem" href="../../generated/data_forced/">Data forced column model</a></li><li><a class="tocitem" href="../../generated/kelp/">Model with particles (kelp) interacting with the biogeochemistry</a></li><li><a class="tocitem" href="../../generated/box/">Box model</a></li><li><a class="tocitem" href="../../generated/eady/">Baroclinic instability</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Numerical implementation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../numerical_implementation/positivity-preservation/">Positivity preservation</a></li></ul></li><li><a class="tocitem" href="../../references/">References</a></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox" checked/><label class="tocitem" for="menuitem-8"><span class="docs-label">Appendix</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Library</a><ul class="internal"><li><a class="tocitem" href="#OceanBioME.jl"><span>OceanBioME.jl</span></a></li><li><a class="tocitem" href="#Biogeochemical-Models"><span>Biogeochemical Models</span></a></li><li><a class="tocitem" href="#Light-Attenuation-Models"><span>Light Attenuation Models</span></a></li><li><a class="tocitem" href="#Boundary-Conditions"><span>Boundary Conditions</span></a></li><li><a class="tocitem" href="#Box-Model"><span>Box Model</span></a></li></ul></li><li><a class="tocitem" href="../function_index/">Function index</a></li><li><input class="collapse-toggle" id="menuitem-8-3" type="checkbox"/><label class="tocitem" for="menuitem-8-3"><span class="docs-label">Parameters</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../generated/LOBSTER_parameters/">LOBSTER</a></li><li><a class="tocitem" href="../../generated/NutrientPhytoplanktonZooplanktonDetritus_parameters/">NutrientPhytoplanktonZooplanktonDetritus</a></li><li><a class="tocitem" href="../../generated/SLatissima_parameters/">SLatissima</a></li><li><a class="tocitem" href="../../generated/TwoBandPhotosyntheticallyActiveRatiation_parameters/">TwoBandPhotosyntheticallyActiveRatiation</a></li><li><a class="tocitem" href="../../generated/SimpleMultiG_parameters/">SimpleMultiG</a></li><li><a class="tocitem" href="../../generated/OceanBioME.Boundaries.pCO₂_parameters/">OceanBioME.Boundaries.pCO₂</a></li><li><a class="tocitem" href="../../generated/CO₂ air-sea exchange_parameters/">CO₂ air-sea exchange</a></li><li><a class="tocitem" href="../../generated/O₂ air-sea exchange_parameters/">O₂ air-sea exchange</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Appendix</a></li><li class="is-active"><a href>Library</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Library</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/OceanBioME/OceanBioME.jl/blob/main/docs/src/appendix/library.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="library_api"><a class="docs-heading-anchor" href="#library_api">Library</a><a id="library_api-1"></a><a class="docs-heading-anchor-permalink" href="#library_api" title="Permalink"></a></h1><p>Documenting the user interface.</p><h2 id="OceanBioME.jl"><a class="docs-heading-anchor" href="#OceanBioME.jl">OceanBioME.jl</a><a id="OceanBioME.jl-1"></a><a class="docs-heading-anchor-permalink" href="#OceanBioME.jl" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.OceanBioME" href="#OceanBioME.OceanBioME"><code>OceanBioME.OceanBioME</code></a> — <span class="docstring-category">Module</span></header><section><div><p>A fast and flexible modelling environment for modelling the coupled interactions between ocean biogeochemistry, carbonate chemistry, and physics.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/OceanBioME.jl#L1-L4">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.ScaleNegativeTracers-Tuple{}" href="#OceanBioME.ScaleNegativeTracers-Tuple{}"><code>OceanBioME.ScaleNegativeTracers</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ScaleNegativeTracers(; tracers, scalefactors = ones(length(tracers)), warn = false)</code></pre><p>Returns a callback that scales <code>tracers</code> so that none are negative. Use like:</p><pre><code class="language-julia hljs">negativity_protection! = ScaleNegativeTracers(; model, tracers = (:P, :Z, :N))
simulation.callbacks[:neg] = Callback(negativity_protection!; callsite = UpdateStateCallsite())</code></pre><p>This method is better, though still imperfect, method to prevent numerical errors that lead to negative tracer values compared to <a href="#OceanBioME.zero_negative_tracers!-Tuple{Any}"><code>zero_negative_tracers!</code></a>. Please see <a href="https://github.com/OceanBioME/OceanBioME.jl/discussions/48">discussion in github</a>.</p><p>Future plansj include implement a positivity=preserving timestepping scheme as the ideal alternative.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Utils/negative_tracers.jl#L111-L124">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.error_on_neg!-Tuple{Any}" href="#OceanBioME.error_on_neg!-Tuple{Any}"><code>OceanBioME.error_on_neg!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">error_on_neg(sim; params = (exclude=(), ))</code></pre><p>Throws an error if any tracers in <code>sim.model</code> are negative. Use like:</p><pre><code class="language-julia hljs">simulation.callbacks[:neg] = Callback(error_on_neg!)</code></pre><p>Tracers to exclude can be set in the parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Utils/negative_tracers.jl#L32-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.remove_NaN_tendencies!-Tuple{Any}" href="#OceanBioME.remove_NaN_tendencies!-Tuple{Any}"><code>OceanBioME.remove_NaN_tendencies!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">remove_NaN_tendencies!(model)</code></pre><p>Zeros any <code>NaN</code> value tendencies as a final protection against negative tracer run away.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Utils/negative_tracers.jl#L153-L157">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.warn_on_neg!-Tuple{Any}" href="#OceanBioME.warn_on_neg!-Tuple{Any}"><code>OceanBioME.warn_on_neg!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">warn_on_neg(sim; params = (exclude=(), ))</code></pre><p>Raises a warning if any tracers in <code>sim.model</code> are negative. Use like:</p><pre><code class="language-julia hljs">simulation.callbacks[:neg] = Callback(warn_on_neg!)</code></pre><p>Tracers to exclude can be set in the parameters.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Utils/negative_tracers.jl#L50-L59">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.zero_negative_tracers!-Tuple{Any}" href="#OceanBioME.zero_negative_tracers!-Tuple{Any}"><code>OceanBioME.zero_negative_tracers!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">zero_negative_tracers!(sim; params = (exclude=(), ))</code></pre><p>Sets any tracers in <code>sim.model</code> which are negative to zero. Use like:</p><pre><code class="language-julia hljs">simulation.callbacks[:neg] = Callback(zero_negative_tracers!)</code></pre><p>Tracers to exclude can be set in the parameters.</p><div class="admonition is-danger"><header class="admonition-header">Tracer conservation</header><div class="admonition-body"><p>This method is <em>not</em> recommended as a way to preserve positivity of tracers since it does not conserve the total tracer.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Utils/negative_tracers.jl#L9-L22">source</a></section></article><h2 id="Biogeochemical-Models"><a class="docs-heading-anchor" href="#Biogeochemical-Models">Biogeochemical Models</a><a id="Biogeochemical-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Biogeochemical-Models" title="Permalink"></a></h2><h3 id="Nutrient-Phytoplankton-Zooplankton-Detritus"><a class="docs-heading-anchor" href="#Nutrient-Phytoplankton-Zooplankton-Detritus">Nutrient Phytoplankton Zooplankton Detritus</a><a id="Nutrient-Phytoplankton-Zooplankton-Detritus-1"></a><a class="docs-heading-anchor-permalink" href="#Nutrient-Phytoplankton-Zooplankton-Detritus" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.NPZDModel" href="#OceanBioME.NPZDModel"><code>OceanBioME.NPZDModel</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Nutrient-Phytoplankton-Zooplankton-Detritus model of <a href="../../references/#Kuhn2015">Angela M. Kuhn, Katja Fennel, Jann Paul Mattern (2015)</a></p><p><strong>Tracers</strong></p><ul><li>Nutrients: N (mmol N/m³)</li><li>Phytoplankton: P (mmol N/m³)</li><li>Zooplankton: Z (mmol N/m³)</li><li>Detritus: D (mmol N/m³)</li></ul><p><strong>Required submodels</strong></p><ul><li>Photosynthetically available radiation: PAR (W/m²)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Models/AdvectedPopulations/NPZD.jl#L1-L15">source</a></section></article><h3 id="The-Lodyc-DAMTP-Ocean-Biogeochemical-Simulation-Tools-for-Ecosystem-and-Resources-(LOBSTER)"><a class="docs-heading-anchor" href="#The-Lodyc-DAMTP-Ocean-Biogeochemical-Simulation-Tools-for-Ecosystem-and-Resources-(LOBSTER)">The Lodyc-DAMTP Ocean Biogeochemical Simulation Tools for Ecosystem and Resources (LOBSTER)</a><a id="The-Lodyc-DAMTP-Ocean-Biogeochemical-Simulation-Tools-for-Ecosystem-and-Resources-(LOBSTER)-1"></a><a class="docs-heading-anchor-permalink" href="#The-Lodyc-DAMTP-Ocean-Biogeochemical-Simulation-Tools-for-Ecosystem-and-Resources-(LOBSTER)" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.LOBSTERModel" href="#OceanBioME.LOBSTERModel"><code>OceanBioME.LOBSTERModel</code></a> — <span class="docstring-category">Module</span></header><section><div><p>The Lodyc-DAMTP Ocean Biogeochemical Simulation Tools for Ecosystem and Resources (LOBSTER) model.</p><p><strong>Tracers</strong></p><ul><li>Nitrates: NO₃ (mmol N/m³)</li><li>Ammonia: NH₄ (mmol N/m³)</li><li>Phytoplankton: P (mmol N/m³)</li><li>Zooplankton: Z (mmol N/m³)</li><li>Small (slow sinking) particulate organic matter: sPOM (mmol N/m³)</li><li>Large (fast sinking) particulate organic matter: bPOM (mmol N/m³)</li><li>Disolved organic matter: DOM (mmol N/m³)</li></ul><p><strong>Optional tracers</strong></p><p>Carbonate chemistry</p><ul><li>Disolved inorganic carbon: DIC (mmol C/m³)</li><li>Alkalinity: Alk (meq/m³)</li></ul><p>Oxygen chemistry</p><ul><li>Oxygen: O₂ (mmol O₂/m³)</li></ul><p>Variable redfield</p><ul><li>Small (slow sinking) particulate organic matter carbon content: sPOC (mmol C/m³)</li><li>Large (fast sinking) particulate organic matter carbon content: bPOC (mmol C/m³)</li><li>Disolved organic matter carbon content: DOC (mmol C/m³)</li><li>When this option is enabled then the usual sPOM and bPOM change to sPON and bPON as they explicitly represent the nitrogen contained in the particulate matter</li></ul><p><strong>Required submodels</strong></p><ul><li>Photosynthetically available radiation: PAR (W/m²)</li></ul><p>For optional tracers:</p><ul><li>Temperature: T (ᵒC)</li><li>Salinity: S (‰)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Models/AdvectedPopulations/LOBSTER/LOBSTER.jl#L1-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.LOBSTERModel.LOBSTER" href="#OceanBioME.LOBSTERModel.LOBSTER"><code>OceanBioME.LOBSTERModel.LOBSTER</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">LOBSTER(; grid,
          phytoplankton_preference::FT = 0.5,
          maximum_grazing_rate::FT = 9.26e-6, # 1/s
          grazing_half_saturation::FT = 1.0, # mmol N/m³
          light_half_saturation::FT = 33.0, # W/m² (?)
          nitrate_ammonia_inhibition::FT = 3.0,
          nitrate_half_saturation::FT = 0.7, # mmol N/m³
          ammonia_half_saturation::FT = 0.001, # mmol N/m³
          maximum_phytoplankton_growthrate::FT = 1.21e-5, # 1/s
          zooplankton_assimilation_fraction::FT = 0.7,
          zooplankton_mortality::FT = 2.31e-6, # 1/s/mmol N/m³
          zooplankton_excretion_rate::FT = 5.8e-7, # 1/s
          phytoplankton_mortality::FT = 5.8e-7, # 1/s
          small_detritus_remineralisation_rate::FT = 5.88e-7, # 1/s
          large_detritus_remineralisation_rate::FT = 5.88e-7, # 1/s
          phytoplankton_exudation_fraction::FT = 0.05,
          nitrifcaiton_rate::FT = 5.8e-7, # 1/s
          ammonia_fraction_of_exudate::FT = 0.75, 
          ammonia_fraction_of_excriment::FT = 0.5,
          ammonia_fraction_of_detritus::FT = 0.0,
          phytoplankton_redfield::FT = 6.56, # mol C/mol N
          organic_redfield::FT = 6.56, # mol C/mol N
          phytoplankton_chlorophyll_ratio::FT = 1.31, # g Chl/mol N
          organic_carbon_calcate_ratio::FT = 0.1, # mol CaCO₃/mol C
          respiraiton_oxygen_nitrogen_ratio::FT = 10.75, # mol O/molN
          nitrifcation_oxygen_nitrogen_ratio::FT = 2.0, # mol O/molN
          slow_sinking_mortality_fraction::FT = 0.5, 
          fast_sinking_mortality_fraction::FT = 0.5,
          disolved_organic_breakdown_rate::FT = 3.86e-7, # 1/s
          zooplankton_calcite_dissolution::FT = 0.3,

          surface_phytosynthetically_active_radiation::SPAR = (x, y, t) -&gt; 100*max(0.0, cos(t*π/(12hours))),

          light_attenuation_model = TwoBandPhotosyntheticallyActiveRatiation(; grid),
          sediment_model::S = nothing,

          carbonates::Bool = false,
          oxygen::Bool = false,
          variable_redfield = false,

          sinking_speed = (sPOM = 3.47e-5, bPOM = 200/day),
          open_bottom::Bool = true,

          particles::P = nothing)</code></pre><p>Construct an instance of the LOBSTER (<a href="../../model_components/biogeochemical/LOBSTER/#LOBSTER">LOBSTER</a>) biogeochemical model.</p><p><strong>Keywork Arguments</strong></p><ul><li><code>grid</code>: (required) the geometry to build the model on, required to calculate sinking</li><li><code>phytoplankton_preference</code>, ..., <code>disolved_organic_breakdown_rate</code>: LOBSTER parameter values</li><li><code>surface_phytosynthetically_active_radiation</code>: funciton (or array in the future) for the photosynthetically available radiation at the surface, should be shape <code>f(x, y, t)</code></li><li><code>light_attenuation_model</code>: light attenuation model which integrated the attenuation of available light</li><li><code>sediment_model</code>: slot for <code>AbstractSediment</code></li><li><code>carbonates</code>, <code>oxygen</code>, and <code>variable_redfield</code>: include models for carbonate chemistry and/or oxygen chemistry and/or variable redfield ratio disolved and particulate organic matter</li><li><code>sinking_speed</code>: named tuple of constant sinking, of fields (i.e. <code>ZFaceField(...)</code>) for any tracers which sink (convention is that a sinking speed is positive, but a field will need to follow the usual down being negative)</li><li><code>open_bottom</code>: should the sinking velocity be smoothly brought to zero at the bottom to prevent the tracers leaving the domain</li><li><code>particles</code>: slot for <code>BiogeochemicalParticles</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Models/AdvectedPopulations/LOBSTER/LOBSTER.jl#L68-L128">source</a></section></article><h3 id="Sugar-kelp-(Saccharina-latissima)"><a class="docs-heading-anchor" href="#Sugar-kelp-(Saccharina-latissima)">Sugar kelp (Saccharina latissima)</a><a id="Sugar-kelp-(Saccharina-latissima)-1"></a><a class="docs-heading-anchor-permalink" href="#Sugar-kelp-(Saccharina-latissima)" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.SLatissimaModel" href="#OceanBioME.SLatissimaModel"><code>OceanBioME.SLatissimaModel</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Sugar kelp model of <a href="../../references/#Broch2012">Ole Jacob Broch, Dag Slagstad (2012)</a> and updated by <a href="../../references/#Broch2013">Ole Jacob Broch, Ingrid Helene Ellingsen, Silje Forbord, Xinxin Wang, Zsolt Volent, Morten Omholt Alver, Aleksander Handå, Kjersti Andresen, Dag Slagstad, Kjell Inge Reitan, Yngvar Olsen, Jorunn Skjermo (2013)</a>, <a href="../../references/#Fossberg2018">Julia Fossberg, Silje Forbord, Ole Jacob Broch, Arne M. Malzahn, Henrice Jansen, Aleksander Handå, Henny Førde, Maria Bergvik, Anne Lise Fleddum, Jorunn Skjermo, Yngvar Olsen (2018)</a>, and <a href="../../references/#Broch2019">Ole Jacob Broch, Morten Omholt Alver, Trine Bekkby, Hege Gundersen, Silje Forbord, Aleksander Handå, Jorunn Skjermo, Kasper Hancke (2019)</a>.</p><p><strong>Prognostic properties</strong></p><ul><li>Area: A (dm²)</li><li>Nitrogen reserve: N (gN/gSW)</li><li>Carbon reserve: C (gC/gSW)</li></ul><p><strong>Tracer dependencies</strong></p><ul><li>Nitrates: NO₃ (mmol N/m³)</li><li>Photosynthetically available radiation: PAR (einstein/m²/day)</li></ul><p>Optionally:</p><ul><li>Ammonia: NH₄ (mmol N/m³)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Models/Individuals/SLatissima.jl#L1-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.SLatissimaModel.SLatissima" href="#OceanBioME.SLatissimaModel.SLatissima"><code>OceanBioME.SLatissimaModel.SLatissima</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SLatissima(; architecture :: AR = CPU()
             growth_rate_adjustement :: FT = 4.5
             photosynthetic_efficiency :: FT = 4.15e-5 * 24 * 10^6 / (24 * 60 * 60)
             minimum_carbon_reserve :: FT = 0.01
             structural_carbon :: FT = 0.2
             exudation :: FT = 0.5
             erosion :: FT = 0.22
             saturation_irradiance :: FT = 90 * day/ (10 ^ 6)
             structural_dry_weight_per_area :: FT = 0.5
             structural_dry_to_wet_weight :: FT = 0.0785
             carbon_reserve_per_carbon :: FT = 2.1213
             nitrogen_reserve_per_nitrogen :: FT = 2.72
             minimum_nitrogen_reserve :: FT = 0.0126
             maximum_nitrogen_reserve :: FT = 0.0216
             growth_adjustement_2 :: FT = 0.039 / (2 * (1 - minimum_nitrogen_reserve / maximum_nitrogen_reserve))
             growth_adjustement_1 :: FT = 0.18 / (2 * (1 - minimum_nitrogen_reserve / maximum_nitrogen_reserve)) - growth_adjustement_2
             maximum_specific_growth_rate :: FT = 0.18
             structural_nitrogen :: FT = 0.0146
             photosynthesis_at_ref_temp_1 :: FT = 1.22e-3 * 24
             photosynthesis_at_ref_temp_2 :: FT = 1.3e-3 * 24
             photosynthesis_ref_temp_1 :: FT = 285.0
             photosynthesis_ref_temp_2 :: FT = 288.0
             photoperiod_1 :: FT = 0.85
             photoperiod_2 :: FT = 0.3
             respiration_at_ref_temp_1 :: FT = 2.785e-4 * 24
             respiration_at_ref_temp_2 :: FT = 5.429e-4 * 24
             respiration_ref_temp_1 :: FT = 285.0
             respiration_ref_temp_2 :: FT = 290.0
             photosynthesis_arrhenius_temp :: FT = (1 / photosynthesis_ref_temp_1 - 1 / photosynthesis_ref_temp_2) ^ -1 * log(photosynthesis_at_ref_temp_2 / photosynthesis_at_ref_temp_1)
             photosynthesis_low_temp :: FT = 271.0
             photosynthesis_high_temp :: FT = 296.0
             photosynthesis_high_arrhenius_temp :: FT = 1414.87
             photosynthesis_low_arrhenius_temp :: FT = 4547.89
             respiration_arrhenius_temp :: FT = (1 / respiration_ref_temp_1 - 1 / respiration_ref_temp_2) ^ -1 * log(respiration_at_ref_temp_2 / respiration_at_ref_temp_1)
             current_speed_for_0p65_uptake :: FT = 0.03
             nitrate_half_saturation :: FT = 4.0
             ammonia_half_saturation :: FT = 1.3
             maximum_nitrate_uptake :: FT = 10 * structural_dry_weight_per_area * 24 * 14 / (10^6)
             maximum_ammonia_uptake :: FT = 12 * structural_dry_weight_per_area * 24 * 14 / (10^6)
             current_1 :: FT = 0.72
             current_2 :: FT = 0.28
             current_3 :: FT = 0.045
             respiration_reference_A :: FT = 1.11e-4 * 24
             respiration_reference_B :: FT = 5.57e-5 * 24
             exudation_redfield_ratio :: FT = Inf

             pescribed_velocity :: U = 0.1
             pescribed_temperature :: T = nothing
             pescribed_salinity :: S = nothing

             #position
             x :: P = arch_array(architecture, [0.0])
             y :: P = arch_array(architecture, zeros(Float64, length(x)))
             z :: P = arch_array(architecture, zeros(Float64, length(x)))

             #properties
             A :: P = arch_array(architecture, ones(Float64, length(x)) * 30)
             N :: P = arch_array(architecture, ones(Float64, length(x)) * 0.01)
             C :: P = arch_array(architecture, ones(Float64, length(x)) * 0.1)

             #feedback
             nitrate_uptake :: P = arch_array(architecture, zeros(Float64, length(x)))
             ammonia_uptake :: P = arch_array(architecture, zeros(Float64, length(x)))
             primary_production :: P = arch_array(architecture, zeros(Float64, length(x)))
             frond_exudation :: P = arch_array(architecture, zeros(Float64, length(x)))
             nitrogen_erosion :: P = arch_array(architecture, zeros(Float64, length(x)))
             carbon_erosion :: P = arch_array(architecture, zeros(Float64, length(x)))

             custom_dynamics :: F = no_dynamics

             scalefactor :: FT = 1.0
             latitude :: FT = 57.5)</code></pre><p><strong>Keywork Arguments</strong></p><ul><li><code>architecture</code>: the architecture to adapt arrays to</li><li><code>growth_rate_adjustement</code>, ..., <code>exudation_redfield_ratio</code>: parameter values</li><li><code>pescribed_velocity</code>, <code>pescribed_temperature</code> and <code>pescribed_salinity</code>: functions for the relative velocity, temperature and salinity in the form <code>f(x, y, z, t)</code></li><li><code>x</code>,<code>y</code> and <code>z</code>: positions of the particles</li><li><code>A</code>, <code>N</code>, and <code>C</code>: area, nitrogen, and carbon reserves</li><li><code>nitrate_uptake</code> ... <code>carbon_erosion</code>: diagnostic values coupled to tracer fields</li><li><code>custom_dynamics</code>: place to add any function of form <code>f!(particles, model, bgc, Δt)</code></li><li><code>scalefactor</code>: scalar scaling for tracer coupling</li><li><code>latitude</code>: model latitude for seasonal growth modulation</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Models/Individuals/SLatissima.jl#L40-L126">source</a></section></article><h2 id="Light-Attenuation-Models"><a class="docs-heading-anchor" href="#Light-Attenuation-Models">Light Attenuation Models</a><a id="Light-Attenuation-Models-1"></a><a class="docs-heading-anchor-permalink" href="#Light-Attenuation-Models" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.Light" href="#OceanBioME.Light"><code>OceanBioME.Light</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Light attenuation by chlorophyll as described by <a href="../../references/#Karleskind2011">P. Karleskind, M. Lévy, L. Memery (2011)</a> (implemented as twoBand) and <a href="../../references/#Morel1988">André Morel (1988)</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Light/Light.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.Light.TwoBandPhotosyntheticallyActiveRatiation-Union{Tuple{}, Tuple{SPAR}, Tuple{FT}} where {FT, SPAR}" href="#OceanBioME.Light.TwoBandPhotosyntheticallyActiveRatiation-Union{Tuple{}, Tuple{SPAR}, Tuple{FT}} where {FT, SPAR}"><code>OceanBioME.Light.TwoBandPhotosyntheticallyActiveRatiation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">TwoBandPhotosyntheticallyActiveRatiation(; grid, 
                                           water_red_attenuation::FT = 0.225, # 1/m
                                           water_blue_attenuation::FT = 0.0232, # 1/m
                                           chlorophyll_red_attenuation::FT = 0.037, # 1/(m * (mgChl/m³) ^ eʳ)
                                           chlorophyll_blue_attenuation::FT = 0.074, # 1/(m * (mgChl/m³) ^ eᵇ)
                                           chlorophyll_red_exponent::FT = 0.629,
                                           chlorophyll_blue_exponent::FT = 0.674,
                                           pigment_ratio::FT = 0.7,
                                           phytoplankton_chlorophyll_ratio::FT = 1.31,
                                           surface_PAR::SPAR = (x, y, t) -&gt; 100 * max(0.0, cos(t * π / 12hours)))</code></pre><p><strong>Keywork Arguments</strong></p><ul><li><code>grid</code>: grid for building the model on</li><li><code>water_red_attenuation</code>, ..., <code>phytoplankton_chlorophyll_ratio</code>: parameter values</li><li><code>surface_PAR</code>: function (or array in the future) for the photosynthetically available radiaiton at the surface, should be shape <code>f(x, y, t)</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Light/2band.jl#L74-L92">source</a></section></article><h2 id="Boundary-Conditions"><a class="docs-heading-anchor" href="#Boundary-Conditions">Boundary Conditions</a><a id="Boundary-Conditions-1"></a><a class="docs-heading-anchor-permalink" href="#Boundary-Conditions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.Boundaries" href="#OceanBioME.Boundaries"><code>OceanBioME.Boundaries</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Boundary conditions for air/sea and sediment flux. </p><p>Currently implemented:</p><ul><li>gasexchange (<a href="../../references/#Wanninkhof1992">R. Wanninkhof (1992)</a>)<ul><li>Generic air-sea flux model described by Wanninkhof, 1992 but only setup for CO₂ and O₂.</li><li>Forces the DIC and oxygen fields, and requires temp (in centigrade) and salinity, plus current DIC and ALK concentration.</li></ul></li><li>Sediments<ul><li>Soetaert (<a href="../../references/#Soetaert2000">Karline Soetaert, Jack J Middelburg, Peter M J Herman, Kerst Buis (2000)</a>)<ul><li>simple (integrated) sediment model described by Soetaert, Middelburg, Herman and Buis, 2000  where organic matter (D and DD) that sinks to the bottom is stored and decays into NO₃ and NH₄,  and takes up O₂ in the process. </li><li>Extended to attribute the corresponding release of DIC.</li><li>Forced by O₂, NO₃, NH₄ and particle concentration in bottom cell.</li></ul></li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Boundaries/Boundaries.jl#L1-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.Boundaries.Sediments.SimpleMultiG" href="#OceanBioME.Boundaries.Sediments.SimpleMultiG"><code>OceanBioME.Boundaries.Sediments.SimpleMultiG</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct SimpleMultiG</code></pre><p>Hold the parameters and fields for a simple &quot;multi G&quot; single-layer sediment model. Based on the Level 3 model described by Soetaert et al. 2000; doi:<a href="https://doi.org/10.1016/S0012-8252(00)00004-0">10.1016/S0012-8252(00)00004-0</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Boundaries/Sediments/simple_multi_G.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.Boundaries.Sediments.SimpleMultiG-Union{Tuple{Any}, Tuple{P4}, Tuple{P3}, Tuple{P2}, Tuple{P1}, Tuple{FT}} where {FT, P1, P2, P3, P4}" href="#OceanBioME.Boundaries.Sediments.SimpleMultiG-Union{Tuple{Any}, Tuple{P4}, Tuple{P3}, Tuple{P2}, Tuple{P1}, Tuple{FT}} where {FT, P1, P2, P3, P4}"><code>OceanBioME.Boundaries.Sediments.SimpleMultiG</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">SimpleMultiG(grid; 
             fast_decay_rate::FT = 2/day,
             slow_decay_rate::FT = 0.2/day,
             fast_redfield::FT = 0.1509,
             slow_redfield::FT = 0.13,
             fast_fraction::FT = 0.74,
             slow_fraction::FT = 0.26,
             refactory_fraction::FT = 0.1,
             nitrate_oxidation_params::P1 = (A = - 1.9785, B = 0.2261, C = -0.0615, D = -0.0289, E = - 0.36109, F = - 0.0232),
             denitrifcaiton_params::P2 = (A = - 3.0790, B = 1.7509, C = 0.0593, D = - 0.1923, E = 0.0604, F = 0.0662),
             anoxic_params::P3 = (A = - 3.9476, B = 2.6269, C = - 0.2426, D = -1.3349, E = 0.1826, F = - 0.0143),
             depth = abs(znode(1, grid, Face())),
             solid_dep_params::P4 = (A = 0.233, B = 0.336, C = 982, D = - 1.548, depth = depth))</code></pre><p>Returns a single-layer &quot;multi G&quot; sediment model (<code>SimpleMultiG</code>) on <code>grid</code> where parameters can be optionally specified.</p><p>The model is a single layer (i.e. does not include porous diffusion) model with three classes of sediment organic matter which decay at three different rates (fast, slow, refactory). The nitrifcation/denitrifcation/anoxic mineralisation fractions default to the parameterisation of Soetaert et al. 2000; doi:<a href="https://doi.org/10.1016/S0012-8252(00)00004-0">10.1016/S0012-8252(00)00004-0</a>.</p><p>This model has not yet been validated or compared to observational data. The variety of degridation processes is likely  to be strongly dependent on oxygen availability (see <a href="https://bg.copernicus.org/articles/6/1273/2009/bg-6-1273-2009.pdf">https://bg.copernicus.org/articles/6/1273/2009/bg-6-1273-2009.pdf</a>) so it will therefore be important to also thoroughly validate the oxygen model (also currently limited).</p><p><strong>Example</strong></p><pre><code class="language- hljs">using OceanBioME, Oceananigans, OceanBioME.Sediments

grid = RectilinearGrid(size=(3, 3, 30), extent=(10, 10, 200))

sediment_model = SimpleMultiG(grid)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/Boundaries/Sediments/simple_multi_G.jl#L28-L66">source</a></section></article><h2 id="Box-Model"><a class="docs-heading-anchor" href="#Box-Model">Box Model</a><a id="Box-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Box-Model" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.BoxModels" href="#OceanBioME.BoxModels"><code>OceanBioME.BoxModels</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Integrate biogeochemical models on a single point</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/BoxModel/boxmodel.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="OceanBioME.BoxModels.SaveBoxModel" href="#OceanBioME.BoxModels.SaveBoxModel"><code>OceanBioME.BoxModels.SaveBoxModel</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SaveBoxModel(filepath::FP)</code></pre><p>Construct object to save box model outputs at <code>filepath</code>.</p><p>Arguments: <code>filepath</code> - path to save results to</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/BoxModel/boxmodel.jl#L145-L151">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Oceananigans.Fields.set!-Tuple{BoxModel}" href="#Oceananigans.Fields.set!-Tuple{BoxModel}"><code>Oceananigans.Fields.set!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set!(model::BoxModel; kwargs...)</code></pre><p>Set the <code>values</code> for a <code>BoxModel</code></p><p>Arguments: <code>model</code> - the model to set the arguments for Keyword Arguments: variable and value pairs to set</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/BoxModel/boxmodel.jl#L126-L133">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Oceananigans.Simulations.run!-Tuple{BoxModel}" href="#Oceananigans.Simulations.run!-Tuple{BoxModel}"><code>Oceananigans.Simulations.run!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">run!(model::BoxModel; feedback_interval = 1000, save_interval = Inf, save = nothing)</code></pre><p>Run a box model</p><p>Arguments: <code>model</code> - the <code>BoxModel</code> to solve</p><p><strong>Keyword Arguments</strong></p><ul><li><code>feedback_interval</code>: how often (number of iterations) to display progress</li><li><code>save_interval</code>: how often (number of iterations) to save output</li><li><code>save</code>: <code>SaveBoxModel</code> object to specify how to save output</li></ul><p>TODO: should abstract out to simulation like Oceananians to add e.g. callbacks</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/OceanBioME/OceanBioME.jl/blob/2815e3633cc16a2a7bb732bdd85b1b4768330326/src/BoxModel/boxmodel.jl#L95-L110">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../references/">« References</a><a class="docs-footer-nextpage" href="../function_index/">Function index »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Sunday 25 June 2023 23:19">Sunday 25 June 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
